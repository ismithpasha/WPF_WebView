"use strict";(self.webpackChunkskote=self.webpackChunkskote||[]).push([[788],{9788:(re,P,l)=>{l.r(P),l.d(P,{ReportsModule:()=>oe});var p=l(6019),S=l(6225),s=l(9133),R=l(3405),N=l(8805),z=l(1659),d=l.n(z),V=l(2473),e=l(3668),F=l(5427),v=l(4522),b=l(6283),E=l(2047),j=l(8260);let A=(()=>{class n{constructor(t){this.http=t,this.apiURL=j.N.apiUrl}transactionInquery(t=1,o=10,r){var a=(new v.LE).set("page",String(t)).set("pageSize",String(o)).set("searchValue",String(r.searchText)).set("fromDate",String(r.fromDate)).set("toDate",String(r.toDate)).set("typeCode",String(r.typeCode));return this.http.get(`${this.apiURL}TransactionReport/ArmyRationTransaction`,{params:a}).pipe((0,b.V)(12e4),(0,E.K)(m=>{throw console.error(m),"TimeoutError"===m.name&&d().fire("Time Out!!","Internal Server Problem"),"Cannot read properties of null (reading 'message')"===m.message&&d().fire("Error!!","Resource Not Available. Link is Not Working","error"),"Bad Request"===m&&d().fire("Error!!","Form Submission Error"),"Unknown Error"===m&&d().fire("Error!!","No Connection Found"),m}))}rebTransaction(t,o,r,a,m,u,g,f,y,I,x,T,w){var D=(new v.LE).set("FromDate",String(t)).set("ToDate",String(o)).set("BillNo",String(r)).set("SmsAcNo",String(a)).set("DueAmount",String(m)).set("PbsNameE",String(u)).set("CoreTransactionId",String(g)).set("RequestTime",String(f)).set("SortField",String(y)).set("SortOrder",String(I)).set("PageNumber",Number(x)).set("PageSize",Number(T)).set("IsDownload",Boolean(w));return this.http.get(`${this.apiURL}TransactionReport/RebAllTransactionData`,{params:D}).pipe((0,b.V)(12e4),(0,E.K)(c=>{throw console.error(c),"TimeoutError"===c.name&&d().fire("Time Out!!","Internal Server Problem"),"Cannot read properties of null (reading 'message')"===c.message&&d().fire("Error!!","Resource Not Available. Link is Not Working","error"),"Bad Request"===c&&d().fire("Error!!","Form Submission Error"),"Unknown Error"===c&&d().fire("Error!!","No Connection Found"),c}))}rebTransactionxl(t,o,r,a,m,u,g,f,y,I,x,T,w){var D=(new v.LE).set("FromDate",String(t)).set("ToDate",String(o)).set("BillNo",String(r)).set("SmsAcNo",String(a)).set("DueAmount",String(m)).set("PbsNameE",String(u)).set("CoreTransactionId",String(g)).set("RequestTime",String(f)).set("SortField",String(y)).set("SortOrder",String(I)).set("PageNumber",Number(x)).set("PageSize",Number(T)).set("IsDownload",Boolean(w));return this.http.get(`${this.apiURL}TransactionReport/RebAllTransactionData`,{params:D,responseType:"blob",observe:"response"}).pipe((0,b.V)(12e4),(0,E.K)(c=>{throw console.error(c),"TimeoutError"===c.name&&d().fire("Time Out!!","Internal Server Problem"),"Cannot read properties of null (reading 'message')"===c.message&&d().fire("Error!!","Resource Not Available. Link is Not Working","error"),"Bad Request"===c&&d().fire("Error!!","Form Submission Error"),"Unknown Error"===c&&d().fire("Error!!","No Connection Found"),c}))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(v.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=l(95),M=l(7683),C=l(8360),h=l(549),B=l(4099);let k=(()=>{class n{constructor(){this.isLoading=new B.X(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function U(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275elementStart(1,"div",2),e.\u0275\u0275elementStart(2,"div",3),e.\u0275\u0275element(3,"div",4),e.\u0275\u0275element(4,"div",4),e.\u0275\u0275element(5,"div",4),e.\u0275\u0275element(6,"div",4),e.\u0275\u0275element(7,"div",4),e.\u0275\u0275element(8,"div",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}let O=(()=>{class n{constructor(t){this.loaderService=t,this.loading=!0}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(k))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-loader"]],decls:1,vars:1,consts:[["id","preloader",4,"ngIf"],["id","preloader"],["id","status"],[1,"spinner-chase"],[1,"chase-dot"]],template:function(t,o){1&t&&e.\u0275\u0275template(0,U,9,0,"div",0),2&t&&e.\u0275\u0275property("ngIf",o.loading)},directives:[p.NgIf],styles:[""]}),n})();function $(n,i){1&n&&e.\u0275\u0275element(0,"app-loader")}function W(n,i){if(1&n&&(e.\u0275\u0275elementStart(0,"tr"),e.\u0275\u0275elementStart(1,"td"),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"td"),e.\u0275\u0275text(4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"td"),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"td"),e.\u0275\u0275text(8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"td"),e.\u0275\u0275text(10),e.\u0275\u0275pipe(11,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td"),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&n){const t=i.$implicit;e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.pbsNameE),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.smsAcNo),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.billNo),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.dueAmount),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(11,6,t.requestTime,"dd/MM/yyyy hh:mm:ss a")," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.transactionId)}}const Y=function(){return{standalone:!0}};let J=(()=>{class n{constructor(t,o,r,a,m,u){this.titleService=t,this.fb=o,this.reportService=r,this.roleService=a,this.encryptionService=m,this.router=u,this.ngUnsubscribe=new R.xQ,this.loader=!1,this.reblists=[],this.total=0,this.pagea=0,this.pageSizes=10,this.cPageVal=this.pagea,this.toPageVal=this.pageSizes,this.defaultval="",this.dropdownList=[],this.selectedItems=[],this.currentdate=`${(new Date).getFullYear()}-${String((new Date).getMonth()+1).padStart(2,"0")}-${String((new Date).getDate()).padStart(2,"0")}`}ngOnInit(){this.titleService.setTitle("Report - REB Postpaid"),this.getallUserServices(),this.dropdownSettings={singleSelection:!0,idField:"id",textField:"shortcode",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:6,allowSearchFilter:!0},this.searchFormRefresh()}searchFormRefresh(){this.searchForm=this.fb.group({FromDate:[`${this.currentdate}`,[s.kI.required]],ToDate:[`${this.currentdate}`,[s.kI.required]],BillNo:[""],SmsAcNo:[""],DueAmount:[""],PbsNameE:[""],CoreTransactionId:[""],RequestTime:[""],SortField:[""],SortOrder:[""],IsDownload:[!1]}),this.f.PbsNameE.setValue(this.defaultval)}get f(){return this.searchForm.controls}getallUserServices(){this.loader=!0;let t=[],o=this.encryptionService.decrypt(localStorage.getItem("username"));this.roleService.getUserService(1,10,o,"rebpostpaid").pipe((0,N.R)(this.ngUnsubscribe)).subscribe({next:r=>{r.data.list.length>0?r.data.list[0].serviceType.split(",").map(a=>{t.push({id:a,shortcode:a})}):(this.router.navigate(["/dashboard"]),d().fire("Ops!","You Don't Have Neccessary Permission To View This Page. Contact With Administrator","error"))},error:r=>{console.error(r),this.loader=!1},complete:()=>{this.dropdownList=t,this.f.PbsNameE.setValue(this.dropdownList[0].id),this.defaultval=this.dropdownList[0].id,this.selectedItems=[this.dropdownList[0]],this.loader=!1}})}downloadXl(){this.reportService.rebTransactionxl(this.f.FromDate.value,this.f.ToDate.value,this.f.BillNo.value,this.f.SmsAcNo.value,this.f.DueAmount.value,this.f.PbsNameE.value,this.f.CoreTransactionId.value,this.f.RequestTime.value,this.f.SortField.value,this.f.SortOrder.value,this.pagea,this.pageSizes,!0).subscribe({next:t=>{200==t.status&&(0,V.saveAs)(t.body,`REB_Postpaid_${this.currentdate}.xlsx`)},error:t=>{console.error(t),this.loader=!1},complete:()=>{this.loader=!1}})}search(){this.loader=!0,this.reportService.rebTransaction(this.f.FromDate.value,this.f.ToDate.value,this.f.BillNo.value,this.f.SmsAcNo.value,this.f.DueAmount.value,this.f.PbsNameE.value,this.f.CoreTransactionId.value,this.f.RequestTime.value,this.f.SortField.value,this.f.SortOrder.value,this.pagea,this.pageSizes,this.f.IsDownload.value).subscribe({next:t=>{this.reblists=t.data,this.total=t.totalCount},error:t=>{console.error(t),this.loader=!1},complete:()=>{this.loader=!1}})}onPageChange(t){return this.loader=!0,this.toPageVal=t*this.pageSizes,this.pagea=t-1,this.cPageVal=(t-1)*this.pageSizes+1,this.toPageVal>this.total&&(this.toPageVal=this.total),this.search(),t}onReceiverItemSelect1(t){this.f.PbsNameE.setValue(t.id)}onReceiverItemUnSelect1(t){this.f.PbsNameE.setValue("")}successmsg(t){d().fire("Congratulations!",t,"success")}errorssmsg(t){d().fire("Ops!",t,"error")}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(F.Title),e.\u0275\u0275directiveInject(s.qu),e.\u0275\u0275directiveInject(A),e.\u0275\u0275directiveInject(_.N),e.\u0275\u0275directiveInject(M.C),e.\u0275\u0275directiveInject(S.F0))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-rebpostpaid"]],decls:67,vars:15,consts:[[4,"ngIf"],[1,"container-fluid"],[1,"row"],[1,"row",3,"formGroup","ngSubmit"],[1,"col-lg-4","mb-1"],["for","PbsNameE"],[3,"placeholder","settings","data","ngModel","ngModelOptions","ngModelChange","onSelect","onDeSelect"],["for","SmsAcNo"],["type","text","formControlName","SmsAcNo","id","SmsAcNo",1,"form-control"],["for","BillNo"],["type","text","formControlName","BillNo","id","BillNo",1,"form-control"],["for","CoreTransactionId"],["type","text","formControlName","CoreTransactionId","id","CoreTransactionId",1,"form-control"],["for","FromDate"],["type","date","formControlName","FromDate","id","FromDate",1,"form-control"],["for","ToDate"],["type","date","formControlName","ToDate","id","ToDate",1,"form-control"],[1,"col-lg-12"],[1,"col-lg-4"],["type","submit",1,"btn","btn-primary","w-100"],["type","button",1,"btn","btn-success","w-100",3,"click"],["type","button",1,"btn","btn-warning","w-100",3,"click"],[1,"row","mt-2","bg-white"],[1,"card"],[1,"card-body","overflow-hidden","table-responsive"],[1,"table","t","nowrap"],[4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","typeCode","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","pageSize","maxSize","pageChange"]],template:function(t,o){1&t&&(e.\u0275\u0275template(0,$,1,0,"app-loader",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"form",3),e.\u0275\u0275listener("ngSubmit",function(){return o.search()}),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"label",5),e.\u0275\u0275text(6,"PBS Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"ng-multiselect-dropdown",6),e.\u0275\u0275listener("ngModelChange",function(a){return o.selectedItems=a})("onSelect",function(a){return o.onReceiverItemSelect1(a)})("onDeSelect",function(a){return o.onReceiverItemUnSelect1(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",4),e.\u0275\u0275elementStart(9,"label",7),e.\u0275\u0275text(10,"SMS AC No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(11,"input",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"div",4),e.\u0275\u0275elementStart(13,"label",9),e.\u0275\u0275text(14,"Bill No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(15,"input",10),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",4),e.\u0275\u0275elementStart(17,"label",11),e.\u0275\u0275text(18,"Pay Channel Transaction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",12),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",4),e.\u0275\u0275elementStart(21,"label",13),e.\u0275\u0275text(22,"From Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(23,"input",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(24,"div",4),e.\u0275\u0275elementStart(25,"label",15),e.\u0275\u0275text(26,"To Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(27,"input",16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(28,"div",17),e.\u0275\u0275elementStart(29,"div",2),e.\u0275\u0275elementStart(30,"div",18),e.\u0275\u0275elementStart(31,"button",19),e.\u0275\u0275text(32,"Submit"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(33,"div",18),e.\u0275\u0275elementStart(34,"button",20),e.\u0275\u0275listener("click",function(){return o.downloadXl()}),e.\u0275\u0275text(35," Download "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"div",18),e.\u0275\u0275elementStart(37,"button",21),e.\u0275\u0275listener("click",function(){return o.searchFormRefresh()}),e.\u0275\u0275text(38," Clear "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",22),e.\u0275\u0275elementStart(40,"div",17),e.\u0275\u0275elementStart(41,"div",23),e.\u0275\u0275elementStart(42,"div",24),e.\u0275\u0275elementStart(43,"table",25),e.\u0275\u0275elementStart(44,"thead"),e.\u0275\u0275elementStart(45,"tr"),e.\u0275\u0275elementStart(46,"th"),e.\u0275\u0275text(47,"PBS Name"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(48,"th"),e.\u0275\u0275text(49,"SMS AC NO"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(50,"th"),e.\u0275\u0275text(51,"Bill No"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(52,"th"),e.\u0275\u0275text(53,"Payment Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(54,"th"),e.\u0275\u0275text(55,"Payment Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(56,"th"),e.\u0275\u0275text(57,"Pay Channel Transaction Id"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(58,"tbody"),e.\u0275\u0275template(59,W,14,9,"tr",26),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(60,"div",27),e.\u0275\u0275elementStart(61,"div",28),e.\u0275\u0275elementStart(62,"div",29),e.\u0275\u0275text(63),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"div",28),e.\u0275\u0275elementStart(65,"div",30),e.\u0275\u0275elementStart(66,"ngb-pagination",31),e.\u0275\u0275listener("pageChange",function(a){return o.pagea=o.onPageChange(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275property("ngIf",o.loader),e.\u0275\u0275advance(3),e.\u0275\u0275property("formGroup",o.searchForm),e.\u0275\u0275advance(4),e.\u0275\u0275property("placeholder","Select Type Code")("settings",o.dropdownSettings)("data",o.dropdownList)("ngModel",o.selectedItems)("ngModelOptions",e.\u0275\u0275pureFunction0(14,Y)),e.\u0275\u0275advance(52),e.\u0275\u0275property("ngForOf",o.reblists),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate3(" Showing ",o.cPageVal," to ",o.toPageVal," of ",o.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",o.total)("pageSize",o.pageSizes)("maxSize",3))},directives:[p.NgIf,s._Y,s.JL,s.sg,C.OP,s.JJ,s.On,s.Fj,s.u,p.NgForOf,h.N9,O],pipes:[p.DatePipe],styles:["input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{background:transparent;bottom:0;color:transparent;cursor:pointer;height:auto;left:0;position:absolute;right:0;top:0;width:auto}"]}),n})(),H=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-rebpostpaiddispute"]],decls:2,vars:0,template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"p"),e.\u0275\u0275text(1,"rebpostpaiddispute works!"),e.\u0275\u0275elementEnd())},styles:[""]}),n})();var G=l(2464);function X(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",41),e.\u0275\u0275elementStart(1,"div",42),e.\u0275\u0275element(2,"app-loader"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd())}function K(n,i){1&n&&(e.\u0275\u0275elementStart(0,"div",43),e.\u0275\u0275text(1," Date range cannot be more than 3 months. "),e.\u0275\u0275elementEnd())}function Q(n,i){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"tr",44),e.\u0275\u0275listener("click",function(){const a=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext().cindex=a}),e.\u0275\u0275elementStart(1,"td",45),e.\u0275\u0275elementStart(2,"p"),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"p"),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"td",45),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"td",45),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"td",45),e.\u0275\u0275text(11),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(12,"td",45),e.\u0275\u0275text(13),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"td"),e.\u0275\u0275elementStart(15,"p"),e.\u0275\u0275text(16),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"td",45),e.\u0275\u0275text(18),e.\u0275\u0275pipe(19,"date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&n){const t=i.$implicit,o=i.index,r=e.\u0275\u0275nextContext();e.\u0275\u0275classProp("row-color",o==r.cindex),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.transactionId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(t.referenceTransactionId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.typeCode," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.transactionAmount," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.feeAmount," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.senderId," "),e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ","Authorized"==t.transactionStatus?"Success":t.transactionStatus," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind2(19,10,t.transactionCompletionDateTime,"M/d/yyyy, h:mm a")," ")}}const Z=function(){return{standalone:!0}},q=[{path:"tap-reb-postpaid",component:J},{path:"tap-reb-postpaid-dispute",component:H},{path:"army-ration",component:(()=>{class n{constructor(t,o,r,a,m,u,g,f){this.modalService=t,this.formBuilder=o,this.transactionService=r,this.authService=a,this.titleService=m,this.router=u,this.encryptionService=g,this.roleService=f,this.ngUnsubscribe=new R.xQ,this.formopen=!1,this.submitted=!1,this.error="",this.success="",this.selectedId="",this.waitloading=!1,this.actoinRequiredAlert=!1,this.selectedOption="",this.seeActions=!0,this.headingtext="",this.total=0,this.pagea=1,this.pageSizes=10,this.loader=!0,this.dropdownList=[],this.selectedItems=[],this.currentdate=`${(new Date).getFullYear()}-${String((new Date).getMonth()+1).padStart(2,"0")}-${String((new Date).getDate()).padStart(2,"0")}`}ngOnInit(){this.titleService.setTitle("Report - Army Ration"),this.dropdownSettings={singleSelection:!0,idField:"id",textField:"shortcode",selectAllText:"Select All",unSelectAllText:"UnSelect All",itemsShowLimit:6,allowSearchFilter:!0},this.refreshform(),this.cPageVal=this.pagea,this.toPageVal=this.pageSizes,this.showtableentries=this.formBuilder.group({showtableentriesn:["10"]}),this.getallUserServices()}getallUserServices(){this.loader=!0;let t=[],o=this.encryptionService.decrypt(localStorage.getItem("username"));this.roleService.getUserService(1,10,o,"army").pipe((0,N.R)(this.ngUnsubscribe)).subscribe({next:r=>{r.data.list.length>0?(this.headingtext=r.data.list[0].unitName,r.data.list[0].serviceType.split(",").map(a=>{t.push({id:a,shortcode:a})})):(this.router.navigate(["/dashboard"]),d().fire("Ops!","You Don't Have Neccessary Permission To View This Page. Contact With Administrator","error"))},error:r=>{console.error(r),this.loader=!1},complete:()=>{this.dropdownList=t,this.f.typeCode.setValue(this.dropdownList[0].id),this.selectedItems=[this.dropdownList[0]],this.loader=!1}})}changeNumberofRows(t){this.loader=!0,this.pageSizes=+this.showtableentries.value.showtableentriesn,this.transactionInquery(this.pagea)}checkLoggedIn(t){var o;t.storageArea==localStorage&&(null!==(o=localStorage.getItem("currentUser"))&&void 0!==o||this.authService.logout())}transactionInquery(t){this.transactionService.transactionInquery(t,this.pageSizes,{typeCode:this.f.typeCode.value,searchText:this.f.searchText.value,fromDate:this.f.fromDate.value,toDate:this.f.toDate.value}).subscribe(r=>{this.processingTransactionLists=r.data,void 0===this.processingTransactionLists?(d().fire("Error!!","Internal Server Problem"),this.loader=!1):(this.processingTransactionLists.forEach(a=>{a.transactionAmount=a.transactionAmount.toFixed(2)}),this.total=r.totalCount,this.toPageVal>this.total&&(this.toPageVal=this.total),setTimeout(()=>{this.loader=!1},1e3))},r=>{this.loader=!1,console.error(r)})}refreshform(){this.resetForm=this.formBuilder.group({typeCode:[""],searchText:[""],fromDate:[`${this.currentdate}`],toDate:[`${this.currentdate}`]},{validator:this.dateRangeValidator()})}dateRangeValidator(){return t=>{const o=t.get("fromDate").value,r=t.get("toDate").value;return o&&r&&(new Date(r).getTime()-new Date(o).getTime())/864e5>92?{dateRangeExceeded:!0}:null}}get f(){return this.resetForm.controls}onSubmit(){this.submitted=!0,!this.resetForm.invalid&&(this.loader=!0,this.transactionInquery(this.pagea))}onPageChange(t){return this.loader=!0,this.toPageVal=t*this.pageSizes,this.pagea=t,this.cPageVal=(t-1)*this.pageSizes+1,this.toPageVal>this.total&&(this.toPageVal=this.total),this.transactionInquery(this.pagea),t}successmsg(t){d().fire("Congratulations!",t,"success")}errorssmsg(t){d().fire("Ops!",t,"error")}opencloseform(){this.formopen=!this.formopen}clearSearch(){this.refreshform()}clickEvent(t){this.cindex=t}dismiss(){this.actoinRequiredAlert=!1,document.getElementById(this.selectedId).classList.remove("bx","bx-loader","bx-spin"),this.selectedId="",this.modalService.dismissAll()}onReceiverItemSelect1(t){this.f.typeCode.setValue(t.id)}onReceiverItemUnSelect1(t){this.f.typeCode.setValue("")}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(h.FF),e.\u0275\u0275directiveInject(s.qu),e.\u0275\u0275directiveInject(A),e.\u0275\u0275directiveInject(G.g),e.\u0275\u0275directiveInject(F.Title),e.\u0275\u0275directiveInject(S.F0),e.\u0275\u0275directiveInject(M.C),e.\u0275\u0275directiveInject(_.N))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["app-armyration"]],hostBindings:function(t,o){1&t&&e.\u0275\u0275listener("storage",function(a){return o.checkLoggedIn(a)},!1,e.\u0275\u0275resolveWindow)},decls:75,vars:17,consts:[[1,"position-relative"],["class","bgsetforloading",4,"ngIf"],["_ngcontent-pxl-c379","",1,"row"],["_ngcontent-pxl-c379","",1,"col-lg-12"],[1,"card","job-filter"],[1,"card-body"],[1,"text-center"],["name","resetForm","novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row","g-3"],[1,"col-lg-3"],["for","typeCode"],[3,"placeholder","settings","data","ngModel","ngModelOptions","ngModelChange","onSelect","onDeSelect"],[1,"col-lg-5"],["for","searchText"],["type","text","id","searchText","autocomplete","off","placeholder","","formControlName","searchText",1,"form-control"],[1,"col-lg-2"],["for","fromDate"],["type","date","id","fromDate","autocomplete","off","placeholder","fromDate","formControlName","fromDate",1,"form-control","ng-pristine","ng-valid","ng-touched"],["class","fw-bold text-danger",4,"ngIf"],["for","toDate"],["type","date","id","toDate","formControlName","toDate","autocomplete","off","placeholder","toDate",1,"form-control"],[1,"col-lg-12","pt-2","px-2"],[1,"position-relative","h-100","hstack","gap-3"],["type","submit",1,"btn","btn-primary","h-100","w-100"],[1,"fas","fa-search","align-middle"],["type","button","aria-controls","collapseExample","aria-expanded","false",1,"btn","btn-warning","h-100","w-100",3,"click"],[1,"fas","fa-undo","align-middle"],[1,"container-fluid",2,"min-height","50dvh"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"table-responsive","mb-0",2,"position","inherit"],[1,"table","table-centered","table-nowrap"],[1,"customise-thead"],[1,"align-middle","double-column"],[3,"row-color","click",4,"ngFor","ngForOf"],[1,"row","justify-content-md-between","align-items-md-center","mt-2"],[1,"col-sm-12","col-md-5"],["id","tickets-table_info","role","typeCode","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-md-right","float-md-end","pagination-rounded"],[3,"collectionSize","pageSize","maxSize","pageChange"],[1,"bgsetforloading"],[1,"position-absolute","middleinpage"],[1,"fw-bold","text-danger"],[3,"click"],[1,"double-column"]],template:function(t,o){1&t&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,X,3,0,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div",3),e.\u0275\u0275elementStart(4,"div",4),e.\u0275\u0275elementStart(5,"div",5),e.\u0275\u0275elementStart(6,"h1",6),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"form",7),e.\u0275\u0275listener("ngSubmit",function(){return o.onSubmit()}),e.\u0275\u0275elementStart(9,"div",8),e.\u0275\u0275elementStart(10,"div",9),e.\u0275\u0275elementStart(11,"div",0),e.\u0275\u0275elementStart(12,"label",10),e.\u0275\u0275text(13,"Type Code"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"ng-multiselect-dropdown",11),e.\u0275\u0275listener("ngModelChange",function(a){return o.selectedItems=a})("onSelect",function(a){return o.onReceiverItemSelect1(a)})("onDeSelect",function(a){return o.onReceiverItemUnSelect1(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(15,"div",12),e.\u0275\u0275elementStart(16,"div",0),e.\u0275\u0275elementStart(17,"label",13),e.\u0275\u0275text(18,"Transaction ID/ Reference ID/ TAP Wallet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(19,"input",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",15),e.\u0275\u0275elementStart(21,"div",0),e.\u0275\u0275elementStart(22,"label",16),e.\u0275\u0275text(23,"From Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(24,"input",17),e.\u0275\u0275template(25,K,2,0,"div",18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(26,"div",15),e.\u0275\u0275elementStart(27,"div",0),e.\u0275\u0275elementStart(28,"label",19),e.\u0275\u0275text(29,"To Date"),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(30,"input",20),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(31,"div",21),e.\u0275\u0275elementStart(32,"div",22),e.\u0275\u0275elementStart(33,"button",23),e.\u0275\u0275element(34,"i",24),e.\u0275\u0275text(35," Search Transaction "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(36,"button",25),e.\u0275\u0275listener("click",function(){return o.clearSearch()}),e.\u0275\u0275element(37,"i",26),e.\u0275\u0275text(38," Clear "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(39,"div",27),e.\u0275\u0275elementStart(40,"div",28),e.\u0275\u0275elementStart(41,"div",29),e.\u0275\u0275elementStart(42,"div",30),e.\u0275\u0275elementStart(43,"div",5),e.\u0275\u0275elementStart(44,"div",31),e.\u0275\u0275elementStart(45,"table",32),e.\u0275\u0275elementStart(46,"thead",33),e.\u0275\u0275elementStart(47,"tr"),e.\u0275\u0275elementStart(48,"th",34),e.\u0275\u0275elementStart(49,"p"),e.\u0275\u0275text(50,"Transaction ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(51,"p"),e.\u0275\u0275text(52,"Reference ID"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(53,"th",34),e.\u0275\u0275text(54," Type Code "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(55,"th",34),e.\u0275\u0275text(56," Transaction Amount "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(57,"th",34),e.\u0275\u0275text(58,"Fee Amount"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(59,"th",34),e.\u0275\u0275elementStart(60,"p"),e.\u0275\u0275text(61,"TAP Wallet"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(62,"th",34),e.\u0275\u0275text(63," Transaction Status "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(64,"th",34),e.\u0275\u0275text(65," Date Time "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(66,"tbody"),e.\u0275\u0275template(67,Q,20,13,"tr",35),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(68,"div",36),e.\u0275\u0275elementStart(69,"div",37),e.\u0275\u0275elementStart(70,"div",38),e.\u0275\u0275text(71),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(72,"div",37),e.\u0275\u0275elementStart(73,"div",39),e.\u0275\u0275elementStart(74,"ngb-pagination",40),e.\u0275\u0275listener("pageChange",function(a){return o.pagea=o.onPageChange(a)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()),2&t&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",o.loader),e.\u0275\u0275advance(6),e.\u0275\u0275textInterpolate(o.headingtext),e.\u0275\u0275advance(1),e.\u0275\u0275property("formGroup",o.resetForm),e.\u0275\u0275advance(6),e.\u0275\u0275property("placeholder","Select Type Code")("settings",o.dropdownSettings)("data",o.dropdownList)("ngModel",o.selectedItems)("ngModelOptions",e.\u0275\u0275pureFunction0(16,Z)),e.\u0275\u0275advance(11),e.\u0275\u0275property("ngIf",o.resetForm.hasError("dateRangeExceeded")),e.\u0275\u0275advance(42),e.\u0275\u0275property("ngForOf",o.processingTransactionLists),e.\u0275\u0275advance(4),e.\u0275\u0275textInterpolate3(" Showing ",o.cPageVal," to ",o.toPageVal," of ",o.total," entries "),e.\u0275\u0275advance(3),e.\u0275\u0275property("collectionSize",o.total)("pageSize",o.pageSizes)("maxSize",3))},directives:[p.NgIf,s._Y,s.JL,s.sg,C.OP,s.JJ,s.On,s.Fj,s.u,p.NgForOf,h.N9,O],pipes:[p.DatePipe],styles:[".align-right[_ngcontent-%COMP%]{text-align:right}.row-color[_ngcontent-%COMP%]{background-color:#41569b1a;color:#000}.pointer[_ngcontent-%COMP%]{cursor:pointer!important}.ml5[_ngcontent-%COMP%]{margin-left:5px}.dropdown-menu-customize[_ngcontent-%COMP%]{left:-84px!important;right:0!important}.absolute-position[_ngcontent-%COMP%]{position:absolute}.text-elipse[_ngcontent-%COMP%]{display:block;width:150px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.align-checkbox[_ngcontent-%COMP%]{align-items:flex-end}.checkbox-mb-1_5[_ngcontent-%COMP%]{margin-bottom:1.5rem!important}.double-column[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{margin-bottom:-1px}.text-elipse[_ngcontent-%COMP%]{display:block;width:165px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}  .tooltip-inner{width:400px;background-color:#556de6be;font-weight:600;font-style:italic}[_ngcontent-%COMP%]::-moz-placeholder{color:#75757573;opacity:1;font-style:italic}[_ngcontent-%COMP%]::placeholder{color:#75757573;opacity:1;font-style:italic}[_ngcontent-%COMP%]:-ms-input-placeholder{color:#75757573;font-style:italic}[_ngcontent-%COMP%]::-ms-input-placeholder{color:#75757573;font-style:italic}.btn-soft-primary[_ngcontent-%COMP%]{color:#556ee6;background-color:#556ee61a;border-color:transparent;transition:all .5s ease}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.alert-mergin[_ngcontent-%COMP%]{margin:1px 39px 8px 26px}.middleinpage[_ngcontent-%COMP%]{z-index:1;top:50%;left:50%;transform:translate(-50%) translateY(-50%)}.bgsetforloading[_ngcontent-%COMP%]{background-color:#ffffffc0;width:100%;height:90vh;position:absolute;z-index:10}"]}),n})()}];let ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[S.Bz.forChild(q)],S.Bz]}),n})();var L=l(3091),te=l(6208);let ne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[p.CommonModule,L.v,te.y]]}),n})(),oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[p.CommonModule,ee,s.u5,s.UX,ne,h._A,h.jF,C.ZQ,L.v]]}),n})()}}]);